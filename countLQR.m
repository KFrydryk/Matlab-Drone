global I m g
Ix = I(1,1);
Iy = I(2,2);
Iz = I(3,3);


A = [0 0 0 0 0 0 1 0 0 0 0 0;...
    0 0 0 0 0 0 0 1 0 0 0 0;...
    0 0 0 0 0 0 0 0 1 0 0 0;...
    0 0 0 0 0 0 0 0 0 1 0 0;...
    0 0 0 0 0 0 0 0 0 0 1 0;...
    0 0 0 0 0 0 0 0 0 0 0 1;...
    0 0 0 0 -g 0 0 0 0 0 0 0;...
    0 0 0 g 0 0 0 0 0 0 0 0;...
    0 0 0 0 0 0 0 0 0 0 0 0;...
    0 0 0 0 0 0 0 0 0 0 0 0;...
    0 0 0 0 0 0 0 0 0 0 0 0;...
    0 0 0 0 0 0 0 0 0 0 0 0];

B = [0 0 0 0;...
    0 0 0 0;...
    0 0 0 0;...
    0 0 0 0;...
    0 0 0 0;...
    0 0 0 0;...
    0 0 0 0;...
    0 0 0 0;...
    -1/m 0 0 0;...
    0 1/Ix 0 0;...
    0 0 1/Iy 0;...
    0 0 0 1/Iz];

D = [0 0 0 0 0 0;...
    0 0 0 0 0 0;...
    0 0 0 0 0 0;...
    0 0 0 0 0 0;...
    0 0 0 0 0 0;...
    0 0 0 0 0 0;...
    1/m 0 0 0 0 0;...
    0 1/m 0 0 0 0;...
    0 0 1/m 0 0 0;...
    0 0 0 1/Ix 0 0;...
    0 0 0 0 1/Iy 0;...
    0 0 0 0 0 1/Iz];

Q = eye(12);
R = eye(4);
[K, S, R] = lqr(A, B, Q, R)
